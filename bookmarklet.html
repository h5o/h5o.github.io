<!DOCTYPE html>
<html>
<head>
	<title>HTML5 Outliner bookmarklet (v0.10.4)</title>
	<style>

		/* src: http://h5o.github.io/css/main.css */
		body, h1, h2, h3, h4, h5, h6, p, blockquote, pre, hr, dl, dd, ol, ul, figure { margin: 0; padding: 0; }
		body { font-family: Helvetica, Arial, sans-serif; font-size: 16px; line-height: 1.5; font-weight: 300; color: #111; -webkit-text-size-adjust: 100%; }

		body { padding: 5px; }
		ul, ol { margin-left: 30px; }

		a { color: #2a7ae2; text-decoration: none; }
		a:visited { color: #1756a9; }
		a:hover { color: #111; text-decoration: underline; }

		p { text-align: center; }
		h1 a { text-align: center; font-weight: bold; display: block; margin: 5px; font-size: 22px; }

	</style>
</head>
<body>
<!--
/**
 * This code contains an implementation of HTML5 outlining algorithm, as described by WHATWG at [1]
 *
 * The copyright notice at [2] says:
 *		(c) Copyright 2004-2009 Apple Computer, Inc., Mozilla Foundation, and Opera Software ASA.
 *		You are granted a license to use, reproduce and create derivative works of this document.
 *
 * [1] http://www.whatwg.org/specs/web-apps/current-work/multipage/sections.html#outlines
 * [2] http://www.whatwg.org/specs/web-apps/current-work/multipage/index.html
 */

-->
<p>Drag to your favorites:</p>

<h1><a href="javascript:(function () { %2F**%0A%20*%20This%20code%20contains%20an%20implementation%20of%20HTML5%20outlining%20algorithm%2C%20as%20described%20by%20WHATWG%20at%20%5B1%5D%0A%20*%0A%20*%20The%20copyright%20notice%20at%20%5B2%5D%20says%3A%0A%20*%09%09(c)%20Copyright%202004-2009%20Apple%20Computer%2C%20Inc.%2C%20Mozilla%20Foundation%2C%20and%20Opera%20Software%20ASA.%0A%20*%09%09You%20are%20granted%20a%20license%20to%20use%2C%20reproduce%20and%20create%20derivative%20works%20of%20this%20document.%0A%20*%0A%20*%20%5B1%5D%20http%3A%2F%2Fwww.whatwg.org%2Fspecs%2Fweb-apps%2Fcurrent-work%2Fmultipage%2Fsections.html%23outlines%0A%20*%20%5B2%5D%20http%3A%2F%2Fwww.whatwg.org%2Fspecs%2Fweb-apps%2Fcurrent-work%2Fmultipage%2Findex.html%0A%20*%2F%0A%0A(function%20e(t%2Cn%2Cr)%7Bfunction%20s(o%2Cu)%7Bif(!n%5Bo%5D)%7Bif(!t%5Bo%5D)%7Bvar%20a%3Dtypeof%20require%3D%3D%22function%22%26%26require%3Bif(!u%26%26a)return%20a(o%2C!0)%3Bif(i)return%20i(o%2C!0)%3Bvar%20f%3Dnew%20Error(%22Cannot%20find%20module%20&#39;%22%2Bo%2B%22&#39;%22)%3Bthrow%20f.code%3D%22MODULE_NOT_FOUND%22%2Cf%7Dvar%20l%3Dn%5Bo%5D%3D%7Bexports%3A%7B%7D%7D%3Bt%5Bo%5D%5B0%5D.call(l.exports%2Cfunction(e)%7Bvar%20n%3Dt%5Bo%5D%5B1%5D%5Be%5D%3Breturn%20s(n%3Fn%3Ae)%7D%2Cl%2Cl.exports%2Ce%2Ct%2Cn%2Cr)%7Dreturn%20n%5Bo%5D.exports%7Dvar%20i%3Dtypeof%20require%3D%3D%22function%22%26%26require%3Bfor(var%20o%3D0%3Bo%3Cr.length%3Bo%2B%2B)s(r%5Bo%5D)%3Breturn%20s%7D)(%7B1%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Avar%20HTML5Outline%20%3D%20require(%22.%2Findex%22)%3B%0A%0Avar%20setStyles%20%3D%20function%20(els%2C%20stl)%20%7B%0A%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20els.length%3B%20i%2B%2B)%20els%5Bi%5D.setAttribute(&#39;style&#39;%2C%20stl)%3B%0A%7D%3B%0A%0Avar%20FONT_STYLE%20%3D%20&#39;font-size%3A11px%3Bfont-family%3AVerdana%2C%20sans-serif%3B&#39;%3B%0Avar%20CONTAINER_STYLE%20%3D%20&#39;position%3Afixed%3Btop%3A10px%3Bright%3A10px%3Bborder%3A2px%20solid%20%23000%3Bbackground%3Argba(255%2C255%2C255%2C.9)%3Bpadding%3A15px%3Bz-index%3A999%3Bmax-height%3A400px%3Boverflow%3Aauto%3B&#39;%3B%0Avar%20LI_STYLE%20%3D%20&#39;list-style%3Adecimal%20outside%3Bmargin-left%3A20px%3B&#39;%3B%0Avar%20OL_STYLE%20%3D%20&#39;margin%3A%200%3Bpadding%3A0%3B&#39;%3B%0Avar%20A_STYLE%20%3D%20&#39;color%3A%23008%3Btext-decoration%3Aunderline%3B&#39;%3B%0Avar%20CLOSE_LNK_STYLE%20%3D%20&#39;float%3A%20right%3B%20margin%3A%200%200%205px%205px%3B%20padding%3A%205px%3B%20border%3A%201px%20%23008%20solid%3Bcolor%3A%2300f%3Bbackground-color%3A%23ccf%3B&#39;%3B%0A%0Avar%20outlineHTML%20%3D%20HTML5Outline(document.body).asHTML(true)%3B%0A%0Avar%20containerDiv%20%3D%20document.createElement(&#39;div&#39;)%3B%0AsetStyles(%5BcontainerDiv%5D%2C%20CONTAINER_STYLE%20%2B%20FONT_STYLE)%3B%0AcontainerDiv.innerHTML%20%3D%20outlineHTML%3B%0A%0AsetStyles(containerDiv.getElementsByTagName(&#39;li&#39;)%2C%20LI_STYLE%20%2B%20FONT_STYLE)%3B%0AsetStyles(containerDiv.getElementsByTagName(&#39;ol&#39;)%2C%20OL_STYLE%20%2B%20FONT_STYLE)%3B%0AsetStyles(containerDiv.getElementsByTagName(&#39;a&#39;)%2C%20A_STYLE%20%2B%20FONT_STYLE)%3B%0A%0Avar%20lnk%20%3D%20containerDiv.insertBefore(document.createElement(&#39;a&#39;)%2C%20containerDiv.firstChild)%3B%0AsetStyles(%5Blnk%5D%2C%20CLOSE_LNK_STYLE)%3B%0Alnk.innerHTML%20%3D%20&#39;Close&#39;%3B%0Alnk.href%20%3D%20&#39;%23&#39;%3B%0Alnk.onclick%20%3D%20function%20(e)%20%7B%0A%09document.body.removeChild(containerDiv)%3B%0A%09containerDiv%20%3D%20lnk%20%3D%20null%3B%0A%09e.preventDefault()%3B%0A%7D%3B%0A%0Adocument.body.appendChild(containerDiv)%3B%0A%0A%7D%2C%7B%22.%2Findex%22%3A2%7D%5D%2C2%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Amodule.exports%20%3D%20require(%22.%2Fsrc%2FcreateOutline%22)%3B%0A%0A%7D%2C%7B%22.%2Fsrc%2FcreateOutline%22%3A7%7D%5D%2C3%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Avar%20asHTML%20%3D%20require(%22.%2FasHTML%22)%3B%0A%0Afunction%20Outline(outlineTarget%2C%20onlySection)%20%7B%0A%09this.startingNode%20%3D%20outlineTarget.node%3B%0A%09this.sections%20%3D%20%5BonlySection%5D%3B%0A%7D%0A%0AOutline.prototype.getLastSection%20%3D%20function%20()%20%7B%0A%09return%20this.sections%5Bthis.sections.length%20-%201%5D%3B%0A%7D%3B%0A%0AOutline.prototype.asHTML%20%3D%20function%20(options)%20%7B%0A%09return%20asHTML(this.sections%2C%20options)%3B%0A%7D%3B%0A%0Amodule.exports%20%3D%20Outline%3B%0A%0A%7D%2C%7B%22.%2FasHTML%22%3A6%7D%5D%2C4%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0A%2F**%0A%20*%20Internal%20data%20structure%20to%20avoid%20adding%20properties%20onto%20native%20objects%0A%20*%0A%20*%20%40param%20%7BElement%7D%20node%0A%20*%20%40constructor%0A%20*%2F%0Afunction%20OutlineTarget(node)%0A%7B%0A%09this.node%20%3D%20node%3B%0A%7D%0A%0Amodule.exports%20%3D%20OutlineTarget%3B%0A%0A%7D%2C%7B%7D%5D%2C5%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Afunction%20Section(startingNode)%20%7B%0A%09this.sections%20%3D%20%5B%5D%3B%0A%09this.startingNode%20%3D%20startingNode%3B%0A%7D%0A%0ASection.prototype.append%20%3D%20function%20(what)%20%7B%0A%09what.container%20%3D%20this%3B%0A%09this.sections.push(what)%3B%0A%7D%3B%0A%0Amodule.exports%20%3D%20Section%3B%0A%0A%7D%2C%7B%7D%5D%2C6%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Avar%20utils%20%3D%20require(%22.%2Futils%22)%3B%0A%0Afunction%20sectionHeadingText(section)%20%7B%0A%0A%09if%20(section.heading.implied)%20%7B%0A%09%09return%20%22%3Ci%3EUntitled%20%22%20%2B%20utils.getTagName(section.startingNode)%20%2B%20%22%3C%2Fi%3E%22%3B%0A%09%7D%0A%0A%09var%20elHeading%20%3D%20utils.getRankingHeadingElement(section.heading)%3B%0A%09if%20(!elHeading)%20%7B%0A%09%09return%20%22%3Ci%3EError%3A%20no%20H1-H6%20inside%20HGROUP%3C%2Fi%3E%22%3B%0A%09%7D%0A%0A%09var%20textContent%20%3D%20elHeading.textContent%3B%0A%09if%20(!textContent)%20%7B%0A%09%09return%20%22%3Ci%3ENo%20text%20content%20inside%20%22%20%2B%20utils.getTagName(elHeading)%20%2B%20%22%3C%2Fi%3E%22%3B%0A%09%7D%0A%0A%09return%20utils.escapeHtml(textContent)%3B%0A%7D%0A%0Afunction%20getId(section%2C%20options)%20%7B%0A%09var%20sectionId%20%3D%20section.startingNode.getAttribute(&#39;id&#39;)%3B%0A%09if%20(sectionId)%20%7B%0A%09%09return%20sectionId%3B%0A%09%7D%0A%0A%09if%20(!section.heading.implied)%20%7B%0A%09%09var%20headingId%20%3D%20section.heading.getAttribute(&#39;id&#39;)%3B%0A%09%09if%20(headingId)%20%7B%0A%09%09%09return%20headingId%3B%0A%09%09%7D%0A%09%7D%0A%0A%09var%20node%20%3D%20section.startingNode%3B%0A%09do%20%7B%0A%09%09var%20id%20%3D%20&#39;h5o-&#39;%20%2B%20(%2B%2Boptions.linkCounter)%3B%0A%09%7D%20while%20(node.ownerDocument.getElementById(id))%3B%0A%0A%09node.setAttribute(&#39;id&#39;%2C%20id)%3B%0A%09return%20id%3B%0A%7D%0A%0Afunction%20asHTML(sections%2C%20options)%20%7B%0A%0A%09if%20(typeof(options)%20!%3D%3D%20%22object%22)%20%7B%0A%09%09%2F%2F%20if%20second%20argument%20is%20not%20an%20object%20-%20it%20must%20be%20the%20boolean%20for%20%60createLinks%60%20(backwards%20compat)%0A%09%09options%20%3D%20%7B%0A%09%09%09createLinks%3A%20!!options%0A%09%09%7D%0A%09%7D%0A%0A%09if%20(!sections.length)%20%7B%0A%09%09return%20&#39;&#39;%3B%0A%09%7D%0A%0A%09if%20(options.skipTopHeader)%20%7B%0A%09%09return%20asHTML(sections%5B0%5D.sections%2C%20%7B%0A%09%09%09skipToHeader%3A%20false%2C%0A%09%09%09createLinks%3A%20options.createLinks%0A%09%09%7D)%0A%09%7D%0A%0A%09if%20(typeof(options.linkCounter)%20%3D%3D%3D%20%22undefined%22)%20%7B%0A%09%09options.linkCounter%20%3D%200%3B%0A%09%7D%0A%0A%09var%20createLinks%20%3D%20!!options.createLinks%3B%0A%09var%20result%20%3D%20%5B%5D%3B%0A%0A%09result.push(%22%3Col%3E%22)%3B%0A%0A%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20sections.length%3B%20i%2B%2B)%20%7B%0A%09%09var%20section%20%3D%20sections%5Bi%5D%3B%0A%09%09result.push(%22%3Cli%3E%22)%3B%0A%0A%09%09if%20(createLinks)%20%7B%0A%09%09%09result.push(&#39;%3Ca%20href%3D%22%23&#39;%20%2B%20getId(section%2C%20options)%20%2B%20&#39;%22%3E&#39;)%3B%0A%09%09%7D%0A%0A%09%09result.push(sectionHeadingText(section))%3B%0A%0A%09%09if%20(createLinks)%20%7B%0A%09%09%09result.push(%22%3C%2Fa%3E%22)%3B%0A%09%09%7D%0A%0A%09%09result.push(asHTML(section.sections%2C%20options))%3B%0A%09%09result.push(%22%3C%2Fli%3E%22)%3B%0A%09%7D%0A%0A%09result.push(%22%3C%2Fol%3E%22)%3B%0A%0A%09return%20result.join(%22%22)%3B%0A%7D%0A%0Amodule.exports%20%3D%20asHTML%3B%0A%0A%7D%2C%7B%22.%2Futils%22%3A8%7D%5D%2C7%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Avar%20Section%20%3D%20require(%22.%2FSection%22)%2C%0A%09Outline%20%3D%20require(%22.%2FOutline%22)%2C%0A%09OutlineTarget%20%3D%20require(%22.%2FOutlineTarget%22)%2C%0A%09walk%20%3D%20require(%22.%2Fwalk%22)%2C%0A%09utils%20%3D%20require(%22.%2Futils%22)%3B%0A%0Avar%20currentOutlineTarget%2C%20currentSection%2C%20stack%3B%0A%0Afunction%20stackTopNode()%20%7B%0A%09if%20(!stack.length)%20return%3B%0A%09return%20stack%5Bstack.length%20-%201%5D.node%3B%0A%7D%0A%0Afunction%20getRank(heading)%20%7B%0A%09var%20rankingElement%20%3D%20utils.getRankingHeadingElement(heading)%3B%0A%09if%20(!rankingElement)%20%7B%0A%09%09%2F%2F%20The%20rank%20of%20an%20hgroup%20element%20is%20the%20rank%20of%20the%20highest-ranked%20h1%E2%80%93h6%20element%20descendant%20of%20the%20hgroup%0A%09%09%2F%2F%20element%2C%20if%20there%20are%20any%20such%20elements%2C%20or%20otherwise%20the%20same%20as%20for%20an%20h1%20element%20(the%20highest%20rank).%0A%09%09%2F%2F%20ref%3A%20https%3A%2F%2Fhtml.spec.whatwg.org%2F%23the-hgroup-element%0A%09%09return%20-1%3B%20%2F%2F%20rank%20of%20H1%0A%09%7D%0A%09return%20-parseInt(utils.getTagName(rankingElement).substr(1))%3B%0A%7D%0A%0Afunction%20onEnterNode(node)%20%7B%0A%0A%09%2F%2F%20If%20the%20top%20of%20the%20stack%20is%20a%20heading%20content%20element%20or%20an%20element%20with%20a%20hidden%20attribute%0A%09%2F%2F%20Do%20nothing.%0A%09var%20stackTop%20%3D%20stackTopNode()%3B%0A%09if%20(utils.isHeading(stackTop)%20%7C%7C%20utils.hasHiddenAttribute(stackTop))%20%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20When%20entering%20an%20element%20with%20a%20hidden%20attribute%0A%09%2F%2F%20Push%20the%20element%20being%20entered%20onto%20the%20stack.%20(This%20causes%20the%20algorithm%20to%20skip%20that%20element%20and%20any%0A%09%2F%2F%20descendants%20of%20the%20element.)%0A%09if%20(utils.hasHiddenAttribute(node))%20%7B%0A%09%09stack.push(%7Bnode%3A%20node%7D)%3B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20When%20entering%20a%20sectioning%20content%20element%0A%09if%20(utils.isSecContent(node))%20%7B%0A%0A%09%09%2F%2F%20If%20current%20outline%20target%20is%20not%20null%2C%20run%20these%20substeps%3A%0A%09%09if%20(currentOutlineTarget%20!%3D%20null)%20%7B%0A%09%09%09%2F%2F%20If%20the%20current%20section%20has%20no%20heading%2C%20create%20an%20implied%20heading%20and%20let%20that%20be%20the%20heading%20for%20the%0A%09%09%09%2F%2F%20current%20section.%0A%09%09%09if%20(!currentSection.heading)%20%7B%0A%09%09%09%09currentSection.heading%20%3D%20%7Bimplied%3A%20true%7D%3B%0A%09%09%09%7D%0A%0A%09%09%09%2F%2F%20Push%20current%20outline%20target%20onto%20the%20stack.%0A%09%09%09stack.push(currentOutlineTarget)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Let%20current%20outline%20target%20be%20the%20element%20that%20is%20being%20entered.%0A%09%09currentOutlineTarget%20%3D%20new%20OutlineTarget(node)%3B%0A%0A%09%09%2F%2F%20Let%20current%20section%20be%20a%20newly%20created%20section%20for%20the%20current%20outline%20target%20element.%0A%09%09%2F%2F%20%40todo%3A%20Associate%20current%20outline%20target%20with%20current%20section.%0A%09%09currentSection%20%3D%20new%20Section(node)%3B%0A%0A%09%09%2F%2F%20Let%20there%20be%20a%20new%20outline%20for%20the%20new%20current%20outline%20target%2C%20initialised%20with%20just%20the%20new%20current%20section%0A%09%09%2F%2F%20as%20the%20only%20section%20in%20the%20outline.%0A%09%09currentOutlineTarget.outline%20%3D%20new%20Outline(currentOutlineTarget.node%2C%20currentSection)%3B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20When%20entering%20a%20sectioning%20root%20element%0A%09if%20(utils.isSecRoot(node))%20%7B%0A%0A%09%09%2F%2F%20If%20current%20outline%20target%20is%20not%20null%2C%20push%20current%20outline%20target%20onto%20the%20stack.%0A%09%09if%20(currentOutlineTarget%20!%3D%20null)%20%7B%0A%09%09%09stack.push(currentOutlineTarget)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Let%20current%20outline%20target%20be%20the%20element%20that%20is%20being%20entered.%0A%09%09currentOutlineTarget%20%3D%20new%20OutlineTarget(node)%3B%0A%0A%09%09%2F%2F%20Let%20current%20outline%20target&#39;s%20parent%20section%20be%20current%20section.%0A%09%09currentOutlineTarget.parentSection%20%3D%20currentSection%3B%0A%0A%09%09%2F%2F%20Let%20current%20section%20be%20a%20newly%20created%20section%20for%20the%20current%20outline%20target%20element.%0A%09%09currentSection%20%3D%20new%20Section(node)%3B%0A%0A%09%09%2F%2F%20Let%20there%20be%20a%20new%20outline%20for%20the%20new%20current%20outline%20target%2C%20initialised%20with%20just%20the%20new%20current%20section%0A%09%09%2F%2F%20as%20the%20only%20section%20in%20the%20outline.%0A%09%09currentOutlineTarget.outline%20%3D%20new%20Outline(currentOutlineTarget.node%2C%20currentSection)%3B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20When%20entering%20a%20heading%20content%20element%0A%09if%20(utils.isHeading(node))%20%7B%0A%0A%09%09%2F%2F%20If%20the%20current%20section%20has%20no%20heading%2C%20let%20the%20element%20being%20entered%20be%20the%20heading%20for%20the%20current%20section.%0A%09%09if%20(!currentSection.heading)%20%7B%0A%09%09%09currentSection.heading%20%3D%20node%3B%0A%0A%09%09%09%2F%2F%20Otherwise%2C%20if%20the%20element%20being%20entered%20has%20a%20rank%20equal%20to%20or%20higher%20than%20the%20heading%20of%20the%20last%20section%20of%0A%09%09%09%2F%2F%20the%20outline%20of%20the%20current%20outline%20target%2C%20or%20if%20the%20heading%20of%20the%20last%20section%20of%20the%20outline%20of%20the%20current%0A%09%09%09%2F%2F%20outline%20target%20is%20an%20implied%20heading%2C%20then%0A%09%09%7D%20else%20if%20(currentOutlineTarget.outline.getLastSection().heading.implied%20%7C%7C%20getRank(node)%20%3E%3D%20getRank(currentOutlineTarget.outline.getLastSection().heading))%20%7B%0A%0A%09%09%09%2F%2F%20create%20a%20new%20section%20and%0A%09%09%09var%20newSection%20%3D%20new%20Section(node)%3B%0A%0A%09%09%09%2F%2F%20append%20it%20to%20the%20outline%20of%20the%20current%20outline%20target%20element%2C%20so%20that%20this%20new%20section%20is%20the%20new%20last%0A%09%09%09%2F%2F%20section%20of%20that%20outline.%0A%09%09%09currentOutlineTarget.outline.sections.push(newSection)%3B%0A%0A%09%09%09%2F%2F%20Let%20current%20section%20be%20that%20new%20section.%0A%09%09%09currentSection%20%3D%20newSection%3B%0A%0A%09%09%09%2F%2F%20Let%20the%20element%20being%20entered%20be%20the%20new%20heading%20for%20the%20current%20section.%0A%09%09%09currentSection.heading%20%3D%20node%3B%0A%0A%09%09%09%2F%2F%20Otherwise%2C%20run%20these%20substeps%3A%0A%09%09%7D%20else%20%7B%0A%0A%09%09%09var%20abortSubsteps%20%3D%20false%3B%0A%0A%09%09%09%2F%2F%20Let%20candidate%20section%20be%20current%20section.%0A%09%09%09var%20candidateSection%20%3D%20currentSection%3B%0A%0A%09%09%09%2F%2F%20Heading%20loop%3A%0A%09%09%09do%20%7B%0A%09%09%09%09%2F%2F%20note%3A%0A%09%09%09%09%2F%2F%20if%20candidateSection%20is%20still%20currentSection%20-%20it%20definitely%20has%20a%20heading%2C%20because%20otherwise%0A%09%09%09%09%2F%2F%20%60node%60%2C%20which%20is%20a%20heading%2C%20would%20be%20a%20heading%20for%20that%20section%0A%0A%09%09%09%09%2F%2F%20if%20the%20heading%20for%20currentSection%20is%20higher%20(or%20same)%2C%20e.g.%20%60node%60%20is%20H2%20and%20currentSection.heading%20is%20H1%0A%09%09%09%09%2F%2F%20then%20our%20%60node%60%20creates%20a%20subsection%20and%20we%20don&#39;t%20need%20to%20care%20about%20anything%20else%0A%0A%09%09%09%09%2F%2F%20if%20our%20%60node%60%20is%20actually%20higher%2C%20e.g.%20%60node%60%20is%20H3%2C%20and%20currentSection.heading%20is%20H4%0A%09%09%09%09%2F%2F%20H4%20is%20not%20the%20last%20child%20of%20the%20outline%20target%20%5Band%20therefore%20not%20the%20only%20child%5D%0A%09%09%09%09%2F%2F%20therefore%20there%20must%20exist%20an%20element%20of%20at%20least%20H3%20or%20higher%20rank%0A%09%09%09%09%2F%2F%20that%20is%20the%20outline%20parent%20of%20the%20H4%20and%20that%20element%20of%20H3%20or%20higher%0A%09%09%09%09%2F%2F%20would%20then%20be%20hit%20by%20going%20upwards%0A%09%09%09%09%2F%2F%20therefore%20getSectionHeadingRank%20is%20sure%20that%20candidateSection.heading%20is%20not%20implied%0A%0A%09%09%09%09%2F%2F%20If%20the%20element%20being%20entered%20has%20a%20rank%20lower%20than%20the%20rank%20of%20the%20heading%20of%20the%20candidate%20section%2C%20then%0A%09%09%09%09if%20(getRank(node)%20%3C%20getRank(candidateSection.heading))%20%7B%0A%0A%09%09%09%09%09%2F%2F%20create%20a%20new%20section%2C%0A%09%09%09%09%09var%20newSection%20%3D%20new%20Section(node)%3B%0A%0A%09%09%09%09%09%2F%2F%20and%20append%20it%20to%20candidate%20section.%20(This%20does%20not%20change%20which%20section%20is%20the%20last%20section%20in%20the%20outline.)%0A%09%09%09%09%09candidateSection.append(newSection)%3B%0A%0A%09%09%09%09%09%2F%2F%20Let%20current%20section%20be%20this%20new%20section.%0A%09%09%09%09%09currentSection%20%3D%20newSection%3B%0A%0A%09%09%09%09%09%2F%2F%20Let%20the%20element%20being%20entered%20be%20the%20new%20heading%20for%20the%20current%20section.%0A%09%09%09%09%09currentSection.heading%20%3D%20node%3B%0A%0A%09%09%09%09%09%2F%2F%20Abort%20these%20substeps.%0A%09%09%09%09%09abortSubsteps%20%3D%20true%3B%0A%09%09%09%09%7D%0A%0A%09%09%09%09%2F%2F%20Let%20new%20candidate%20section%20be%20the%20section%20that%20contains%20candidate%20section%20in%20the%20outline%20of%20current%20outline%20target.%0A%09%09%09%09var%20newCandidateSection%20%3D%20candidateSection.container%3B%0A%0A%09%09%09%09%2F%2F%20Let%20candidate%20section%20be%20new%20candidate%20section.%0A%09%09%09%09candidateSection%20%3D%20newCandidateSection%3B%0A%0A%09%09%09%09%2F%2F%20Return%20to%20the%20step%20labeled%20heading%20loop.%0A%09%09%09%7D%20while%20(!abortSubsteps)%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Push%20the%20element%20being%20entered%20onto%20the%20stack.%20(This%20causes%20the%20algorithm%20to%20skip%20any%20descendants%20of%20the%20element.)%0A%09%09stack.push(%7Bnode%3A%20node%7D)%3B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20Otherwise%0A%09%2F%2F%20Do%20nothing.%0A%7D%0A%0Afunction%20onExitNode(node)%20%7B%0A%0A%0A%09%2F%2F%20When%20exiting%20an%20element%2C%20if%20that%20element%20is%20the%20element%20at%20the%20top%20of%20the%20stack%0A%09%2F%2F%20Note%3A%20The%20element%20being%20exited%20is%20a%20heading%20content%20element%20or%20an%20element%20with%20a%20hidden%20attribute.%0A%09%2F%2F%20Pop%20that%20element%20from%20the%20stack.%0A%09var%20stackTop%20%3D%20stackTopNode()%3B%0A%09if%20(stackTop%20%3D%3D%3D%20node)%20%7B%0A%09%09stack.pop()%3B%0A%09%7D%0A%0A%09%2F%2F%20If%20the%20top%20of%20the%20stack%20is%20a%20heading%20content%20element%20or%20an%20element%20with%20a%20hidden%20attribute%0A%09%2F%2F%20Do%20nothing.%0A%09if%20(utils.isHeading(stackTop)%20%7C%7C%20utils.hasHiddenAttribute(stackTop))%20%7B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20When%20exiting%20a%20sectioning%20content%20element%2C%20if%20the%20stack%20is%20not%20empty%0A%09if%20(utils.isSecContent(node)%20%26%26%20stack.length%20%3E%200)%20%7B%0A%0A%09%09%2F%2F%20If%20the%20current%20section%20has%20no%20heading%2C%20create%20an%20implied%20heading%20and%20let%20that%20be%20the%20heading%20for%20the%20current%20section.%0A%09%09if%20(!currentSection.heading)%20%7B%0A%09%09%09currentSection.heading%20%3D%20%7Bimplied%3A%20true%7D%3B%0A%09%09%7D%0A%0A%09%09var%20targetBeingExited%20%3D%20currentOutlineTarget%3B%20%2F%2F%20note%3A%20%60targetBeingExited.node%60%20is%20%60node%60%0A%0A%09%09%2F%2F%20Pop%20the%20top%20element%20from%20the%20stack%2C%20and%20let%20the%20current%20outline%20target%20be%20that%20element.%0A%09%09currentOutlineTarget%20%3D%20stack.pop()%3B%0A%0A%09%09%2F%2F%20Let%20current%20section%20be%20the%20last%20section%20in%20the%20outline%20of%20the%20current%20outline%20target%20element.%0A%09%09currentSection%20%3D%20currentOutlineTarget.outline.getLastSection()%3B%0A%0A%09%09%2F%2F%20Append%20the%20outline%20of%20the%20sectioning%20content%20element%20being%20exited%20to%20the%20current%20section.%0A%09%09%2F%2F%20(This%20does%20not%20change%20which%20section%20is%20the%20last%20section%20in%20the%20outline.)%0A%09%09for%20(var%20i%20%3D%200%3B%20i%20%3C%20targetBeingExited.outline.sections.length%3B%20i%2B%2B)%20%7B%0A%09%09%09currentSection.append(targetBeingExited.outline.sections%5Bi%5D)%3B%0A%09%09%7D%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20When%20exiting%20a%20sectioning%20root%20element%2C%20if%20the%20stack%20is%20not%20empty%0A%09if%20(utils.isSecRoot(node)%20%26%26%20stack.length%20%3E%200)%20%7B%0A%0A%09%09%2F%2F%20If%20the%20current%20section%20has%20no%20heading%2C%20create%20an%20implied%20heading%20and%20let%20that%20be%20the%20heading%20for%20the%20current%20section.%0A%09%09if%20(!currentSection.heading)%20%7B%0A%09%09%09currentSection.heading%20%3D%20%7Bimplied%3A%20true%7D%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Let%20current%20section%20be%20current%20outline%20target&#39;s%20parent%20section.%0A%09%09currentSection%20%3D%20currentOutlineTarget.parentSection%3B%0A%0A%09%09%2F%2F%20Pop%20the%20top%20element%20from%20the%20stack%2C%20and%20let%20the%20current%20outline%20target%20be%20that%20element.%0A%09%09currentOutlineTarget%20%3D%20stack.pop()%3B%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20The%20current%20outline%20target%20is%20the%20element%20being%20exited%2C%20and%20it%20is%20the%20sectioning%20content%20element%20or%20a%20sectioning%0A%09%2F%2F%20root%20element%20at%20the%20root%20of%20the%20subtree%20for%20which%20an%20outline%20is%20being%20generated.%0A%09%2F%2F%20Note%3A%20The%20current%20outline%20target%20is%20the%20element%20being%20exited%2C%20and%20it%20is%20the%20sectioning%20content%20element%20or%0A%09%2F%2F%20a%20sectioning%20root%20element%20at%20the%20root%20of%20the%20subtree%20for%20which%20an%20outline%20is%20being%20generated.%0A%09if%20(utils.isSecContent(node)%20%7C%7C%20utils.isSecRoot(node))%20%7B%0A%0A%09%09%2F%2F%20If%20the%20current%20section%20has%20no%20heading%2C%20create%20an%20implied%20heading%20and%20let%20that%20be%20the%20heading%20for%20the%20current%20section.%0A%09%09if%20(!currentSection.heading)%20%7B%0A%09%09%09currentSection.heading%20%3D%20%7Bimplied%3A%20true%7D%3B%0A%09%09%7D%0A%0A%09%09%2F%2F%20Skip%20to%20the%20next%20step%20in%20the%20overall%20set%20of%20steps.%20(The%20walk%20is%20over.)%0A%09%09return%3B%0A%09%7D%0A%0A%09%2F%2F%20Otherwise%0A%09%2F%2F%20Do%20nothing.%0A%7D%0A%0Afunction%20createOutline(start)%20%7B%0A%0A%09if%20(!utils.isSecContent(start)%20%26%26%20!utils.isSecRoot(start))%20%7B%0A%09%09throw%20new%20TypeError(%22Invalid%20argument%3A%20start%20element%20must%20either%20be%20sectioning%20root%20or%20sectioning%20content.%22)%3B%0A%09%7D%0A%0A%09%2F%2F%20Let%20current%20outline%20target%20be%20null.%0A%09%2F%2F%20(It%20holds%20the%20element%20whose%20outline%20is%20being%20created.)%0A%09currentOutlineTarget%20%3D%20null%3B%0A%0A%09%2F%2F%20Let%20current%20section%20be%20null.%0A%09%2F%2F%20(It%20holds%20a%20pointer%20to%20a%20section%2C%20so%20that%20elements%20in%20the%20DOM%20can%20all%20be%20associated%20with%20a%20section.)%0A%09currentSection%20%3D%20null%3B%0A%0A%09%2F%2F%20Create%20a%20stack%20to%20hold%20elements%2C%20which%20is%20used%20to%20handle%20nesting.%20Initialise%20this%20stack%20to%20empty.%0A%09stack%20%3D%20%5B%5D%3B%0A%0A%09%2F%2F%20Walk%20over%20the%20DOM%20in%20tree%20order%2C%20starting%20with%20the%20sectioning%20content%20element%20or%20sectioning%20root%20element%20at%20the%0A%09%2F%2F%20root%20of%20the%20subtree%20for%20which%20an%20outline%20is%20to%20be%20created%2C%20and%20trigger%20the%20first%20relevant%20step%20below%20for%20each%0A%09%2F%2F%20element%20as%20the%20walk%20enters%20and%20exits%20it.%0A%09walk(start%2C%20onEnterNode%2C%20onExitNode)%3B%0A%0A%09%2F%2F%20%40todo%3A%20In%20addition%2C%20whenever%20the%20walk%20exits%20a%20node%2C%20after%20doing%20the%20steps%20above%2C%20if%20the%20node%20is%20not%20associated%20with%20a%20section%20yet%2C%20associate%20the%20node%20with%20the%20section%20current%20section.%0A%09%2F%2F%20%40todo%3A%20Associate%20all%20non-element%20nodes%20that%20are%20in%20the%20subtree%20for%20which%20an%20outline%20is%20being%20created%20with%20the%20section%20with%20which%20their%20parent%20element%20is%20associated.%0A%09%2F%2F%20%40todo%3A%20Associate%20all%20nodes%20in%20the%20subtree%20with%20the%20heading%20of%20the%20section%20with%20which%20they%20are%20associated%2C%20if%20any.%0A%0A%09%2F%2F%20%60currentOutlineTarget%60%20cannot%20be%20null%2C%20since%20we%20can%20only%20%60start%60%20at%20sectioning%20root%2Fcontent%0A%09%2F%2F%20and%20entering%20sectioning%20root%2Fcontent%20always%20sets%20a%20%60currentOutlineTarget%60%0A%09return%20currentOutlineTarget.outline%3B%0A%0A%7D%0A%0Amodule.exports%20%3D%20createOutline%3B%0A%0A%7D%2C%7B%22.%2FOutline%22%3A3%2C%22.%2FOutlineTarget%22%3A4%2C%22.%2FSection%22%3A5%2C%22.%2Futils%22%3A8%2C%22.%2Fwalk%22%3A9%7D%5D%2C8%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Afunction%20getTagName(el)%20%7B%0A%09return%20el.tagName.toUpperCase()%3B%20%2F%2F%20upper%20casing%20due%20to%20http%3A%2F%2Fejohn.org%2Fblog%2Fnodename-case-sensitivity%2F%0A%7D%0A%0Afunction%20tagChecker(regexString)%20%7B%0A%09return%20function%20(el)%20%7B%0A%09%09return%20isElement(el)%20%26%26%20(new%20RegExp(regexString%2C%20%22i%22)).test(getTagName(el))%3B%0A%09%7D%0A%7D%0A%0Afunction%20isElement(obj)%20%7B%0A%09return%20obj%20%26%26%20obj.tagName%3B%0A%7D%0A%0Avar%20isHeading%20%3D%20tagChecker(&#39;%5EH%5B1-6%5D%7CHGROUP%24&#39;)%3B%0A%0Afunction%20getRankingHeadingElement(heading)%20%7B%0A%09if%20(!isHeading(heading))%20%7B%0A%09%09throw%20new%20Error(%22Not%20a%20heading%20element%22)%3B%0A%09%7D%0A%0A%09var%20elTagName%20%3D%20getTagName(heading)%3B%0A%09if%20(elTagName%20!%3D%3D%20%22HGROUP%22)%20%7B%0A%09%09return%20heading%3B%0A%09%7D%0A%0A%09%2F%2F%20find%20highest%20ranking%20heading%20inside%20HGROUP%0A%09for%20(var%20i%20%3D%201%3B%20i%20%3C%3D%206%3B%20i%2B%2B)%20%7B%0A%09%09var%20headings%20%3D%20heading.getElementsByTagName(%22H%22%20%2B%20i)%3B%0A%09%09if%20(headings.length)%20%7B%0A%09%09%09return%20headings%5B0%5D%3B%0A%09%09%7D%0A%09%7D%0A%0A%09%2F%2F%20HGROUP%20has%20no%20headings...%0A%09return%20null%3B%0A%7D%0A%0Afunction%20escapeHtml(str)%20%7B%0A%09return%20(%22%22%2Bstr).replace(%2F%26%2Fg%2C%20%22%26amp%3B%22).replace(%2F%3C%2Fg%2C%20%22%26lt%3B%22)%3B%0A%7D%0A%0Afunction%20hasHiddenAttribute(el)%20%7B%0A%09return%20isElement(el)%20%26%26%20el.hasAttribute(%22hidden%22)%3B%0A%7D%0A%0Aexports.getTagName%20%3D%20getTagName%3B%0A%0Aexports.hasHiddenAttribute%20%3D%20hasHiddenAttribute%3B%0Aexports.isSecRoot%20%3D%20tagChecker(&#39;%5EBLOCKQUOTE%7CBODY%7CDETAILS%7CFIELDSET%7CFIGURE%7CTD%24&#39;)%3B%0Aexports.isSecContent%20%3D%20tagChecker(&#39;%5EARTICLE%7CASIDE%7CNAV%7CSECTION%24&#39;)%3B%0Aexports.isHeading%20%3D%20isHeading%3B%0Aexports.getRankingHeadingElement%20%3D%20getRankingHeadingElement%3B%0A%0Aexports.escapeHtml%20%3D%20escapeHtml%3B%0A%0A%7D%2C%7B%7D%5D%2C9%3A%5Bfunction(require%2Cmodule%2Cexports)%7B%0Amodule.exports%20%3D%20function%20(root%2C%20enter%2C%20exit)%20%7B%0A%09var%20node%20%3D%20root%3B%0A%09start%3A%20while%20(node)%20%7B%0A%09%09enter(node)%3B%0A%09%09if%20(node.firstChild)%20%7B%0A%09%09%09node%20%3D%20node.firstChild%3B%0A%09%09%09continue%20start%3B%0A%09%09%7D%0A%09%09while%20(node)%20%7B%0A%09%09%09exit(node)%3B%0A%09%09%09if%20(node.nextSibling)%20%7B%0A%09%09%09%09node%20%3D%20node.nextSibling%3B%0A%09%09%09%09continue%20start%3B%0A%09%09%09%7D%0A%09%09%09if%20(node%20%3D%3D%20root)%0A%09%09%09%09node%20%3D%20null%3B%0A%09%09%09else%0A%09%09%09%09node%20%3D%20node.parentNode%3B%0A%09%09%7D%0A%09%7D%0A%7D%3B%0A%0A%7D%2C%7B%7D%5D%7D%2C%7B%7D%2C%5B1%5D)%3B%0A })()" title="H5O v0.10.4">H5O v0.10.4</a></h1>

<ul id="help">
	<li><a target="_top" href="http://marklets.com/FAQ.aspx#howDoIAddABookmarkletToMyBrowser">Installation details</a> for common browsers</li>
	<li><a target="_top" href="https://github.com/h5o/h5o-js/wiki/Bookmarklet-problems-with-Internet-Explorer">IE not supported</a></li>
	<li>Internet Explorer <a target="_top" href="http://h5o.github.io">HTML5 outliner</a></li>
</ul>

<script>
	if (window !== window.top) {
		document.getElementById("help").style.display = "none";
	}
</script>

</body>
</html>
